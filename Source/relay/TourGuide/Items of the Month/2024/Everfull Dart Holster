//Everfull Dart Holster
RegisterTaskGenerationFunction("IOTMEverfullDartsGenerateTasks");
void IOTMEverfullDartsGenerateTasks(ChecklistEntry [int] task_entries, ChecklistEntry [int] optional_task_entries, ChecklistEntry [int] future_task_entries)
{
	#if (__misc_state["in run"] && available_amount($item[everfull dart holster]) > 0 && my_path().id != PATH_COMMUNITY_SERVICE)
	{
		string [int] description;
		string url = "inventory.php?ftext=everfull+dart_holster";
			
			if ($effect[everything looks red].have_effect() == 0) 
		{
			int dartCooldown = 50;
			if (get_property("everfullDartPerks").contains_text("You are less impressed by bullseyes")) {
				dartCooldown -= 10;
			}
			if (get_property("everfullDartPerks").contains_text("Bullseyes do not impress you much")) {
				dartCooldown -= 10;
			}
			description.listAppend(HTMLGenerateSpanFont("ğŸ‘ğŸ¯Shoot a bullseye! (" + dartCooldown + " ELR)", "red"));
			if (lookupItem("everfull dart holster").equipped_amount() == 0)
			{
				description.listAppend(HTMLGenerateSpanFont("Equip the dart holster first.", "red"));
			}
			else description.listAppend(HTMLGenerateSpanFont("Dart holster equipped", "blue"));
			task_entries.listAppend(ChecklistEntryMake("__item everfull dart holster", url, ChecklistSubentryMake("Everfull Darts free kill available!", "", description), -11));
		}
	}
}

RegisterResourceGenerationFunction("IOTMEverfullDartsGenerateResource");
void IOTMEverfullDartsGenerateResource(ChecklistEntry [int] resource_entries)
{
	if (__misc_state["in run"] && available_amount($item[everfull dart holster]) > 0 && my_path().id != PATH_COMMUNITY_SERVICE)
	{
		string [int] description;
		string url = "inventory.php?ftext=everfull+dart_holster";
			
		int dartSkill = get_property_int("dartsThrown");
		int dartsNeededForNextPerk = (floor(sqrt(dartSkill)+1) **2 - dartSkill);
		description.listAppend("Current dart skill: " + dartSkill);
		description.listAppend(HTMLGenerateSpanFont(dartsNeededForNextPerk, "blue") + " darts needed for next Perk");
	
		if (lookupItem("everfull dart holster").equipped_amount() == 0)
		{
			description.listAppend(HTMLGenerateSpanFont("Equip the dart holster first.", "red"));
		}
		else description.listAppend(HTMLGenerateSpanFont("Dart holster equipped", "blue"));
		resource_entries.listAppend(ChecklistEntryMake("__item everfull dart holster", url, ChecklistSubentryMake("ğŸ‘ğŸ¯Everfull Dart Holster charging", "", description), 11));
	}
}
